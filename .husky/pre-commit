#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if build passes (most critical)
echo "ğŸ”¨ Verificando que la aplicaciÃ³n compila..."
npm run build

# Run linting (but don't fail on warnings)
echo "ğŸ” Ejecutando ESLint..."
npm run lint || echo "âš ï¸ ESLint encontrÃ³ problemas pero el commit continuarÃ¡"

# Prevent commits to main branch
branch="$(git rev-parse --abbrev-ref HEAD)"

if [ "$branch" = "main" ]; then
  echo "ğŸš« No puedes hacer commit directamente a main"
  echo "   Crea una rama feature: git checkout -b feat/tu-feature"
  exit 1
fi

echo "âœ… Pre-commit checks passed"
